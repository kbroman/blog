<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.40.1" />


<title>Randomized Hobbit - the stupidest thing...</title>
<meta property="og:title" content="Randomized Hobbit - the stupidest thing...">



  








<link href='//cdn.bootcss.com/highlight.js/9.10.0/styles/github.min.css' rel='stylesheet' type='text/css'>



<link rel="stylesheet" href="https://kbroman.org/blog/css/fonts.css" media="all">
<link rel="stylesheet" href="https://kbroman.org/blog/css/main.css" media="all">

<link rel="stylesheet" href="https://kbroman.org/blog/css/custom.css">



  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <nav class="nav">
  <a href="https://kbroman.org/blog/" class="nav-logo">
    <img src="https://kbroman.org/blog/images/karl.png"
         width="50"
         height="50"
         alt="Logo">
  </a>

  <a href="https://kbroman.org/blog/" class="nav-title">the stupidest thing...</a>

  <ul class="nav-links">
    
    <li><a href="https://kbroman.org/blog/about">
            <img alt="about" src="../../../../images/about_logo.png" class="nav-link"/>
            </a></li>
    
    <li><a href="https://github.com/kbroman">
            <img alt="github" src="../../../../images/github_logo.png" class="nav-link"/>
            </a></li>
    
    <li><a href="https://twitter.com/kwbroman">
            <img alt="twitter" src="../../../../images/twitter_logo.png" class="nav-link"/>
            </a></li>
    
    <li><a href="https://kbroman.org">
            <img alt="web" src="../../../../images/web_logo.png" class="nav-link"/>
            </a></li>
    
  </ul>
</nav>

      </header>


<main class="content" role="main">

  <article class="article">
    
    <span class="article-duration">2 min read</span>
    

    <h1 class="article-title">Randomized Hobbit</h1>

    
    <span class="article-date">2015/06/22</span>
    

    <div class="article-content">
      <p><a href="https://twitter.com/wrathematics">@wrathematics</a> pointed me to his <a href="http://cran.r-project.org/package=ngram">ngram</a> R package for constructing and simulating from n-grams from text.</p>

<p>I&rsquo;d recently grabbed the text of the hobbit, and so I applied it to that text, with amusing results.</p>

<p>Here&rsquo;s the code I used to grab the text.</p>

<pre><code>library(XML)
stem &lt;- &quot;http://www.5novels.com/classics/u5688&quot;
hobbit &lt;- NULL
for(i in 1:74) {
```r
cat(i,&quot;\n&quot;)
if(i==1) {
    url &lt;- paste0(stem, &quot;.html&quot;)
} else {
    url &lt;- paste0(stem, &quot;_&quot;, i, &quot;.html&quot;)
}

x &lt;- htmlTreeParse(url, useInternalNodes=TRUE)
xx &lt;- xpathApply(x, &quot;//p&quot;, xmlValue)
hobbit &lt;- c(hobbit, gsub(&quot;\r&quot;, &quot;&quot;, xx[-length(xx)]))
Sys.sleep(0.5)
```
}
</code></pre>

<p>Then calculate the ngrams with n=2.</p>

<pre><code>library(ngram)
ng2 &lt;- ngram(hobbit, n=2)
</code></pre>

<p>Simulate some number of words with <code>babble()</code>. If you use the <code>seed</code> argument, you can get the result reproducibly.</p>

<pre><code>babble(ng2, 48, seed=53482175)
</code></pre>

<blockquote>
into trees, and then bore to the Mountain to go through?" groaned the hobbit. "Well, are you doing, And where are you doing, And where are you?" it squeaked, as it was no answer. They were surly and angry and puzzled at finding them here in their holes
</blockquote>

<p><strong>Update</strong>: <a href="https://twitter.com/wrathematics">@wrathematics</a> suggested that I <a href="http://librestats.com/2014/07/01/modern-applied-statistics-in-rlyeh/">mix two texts</a>, so here&rsquo;s a bit from the <em>Hobbit in the Hat</em> (The Hobbit with 59Ã— Cat in the Hat &ndash; up-sampled to match lengths.) But there&rsquo;s maybe not enough overlap between the two texts to get much of a mixture.</p>

<blockquote>
"I am Gandalf," said the fish. This is no way at all!
</blockquote>

<blockquote>
already off his horse and among the goblin and the dragon, who had remained behind to guard the door. "Something is outside!" Bilbo's heart jumped into his boat on to sharp rocks below; but there was a good game, Said our fish No! No! Those Things should not fly.
</blockquote>

    </div>
  </article>

  
<section id="comments">
  <div id="disqus_thread"></div>
  <script>
  
  var disqus_config = function () {
    this.page.url = "https:\/\/kbroman.org\/blog" + location.pathname;
  };
  
  (function() {
   var inIFrame = function() {
      var iframe = true;
      try { iframe = window.self !== window.top; } catch (e) {}
      return iframe;
    };
    if (inIFrame()) return;
    var d = document, s = d.createElement('script');
    s.src = '//kbroman-blog.disqus.com/embed.js'; s.async = true;
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>



</main>

      <footer class="footer">
        <ul class="footer-links">
          <li>
            <a href="https://creativecommons.org/licenses/by/4.0/legalcode"><img src="https://kbroman.org/blog/images/cc-by.svg" height="28" style="vertical-align:middle;"></a>
          </li>
        </ul>
      </footer>

    </div>
    



<script src="//cdn.bootcss.com/highlight.js/9.10.0/highlight.min.js"></script>

<script src="//cdn.bootcss.com/highlight.js/9.10.0/languages/r.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.10.0/languages/yaml.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



    
<script src="https://kbroman.org/js/math-code.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script>
<script async type="text/javascript"
  src="https://cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


    
  </body>
</html>

